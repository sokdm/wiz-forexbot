<!DOCTYPE html>
<html>
<head>
    <title>WizForex - AI Trading Bot</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:#0a0e1a;color:#fff;min-height:100vh}
        .container{max-width:1200px;margin:0 auto;padding:20px}
        .header{display:flex;justify-content:space-between;align-items:center;padding:20px 0}
        .logo{font-size:28px;font-weight:800;background:linear-gradient(135deg,#00d4ff,#7b2cbf);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .nav a{color:#64748b;text-decoration:none;margin-left:25px;font-weight:500;transition:.3s}
        .nav a:hover{color:#fff}
        .main-card{background:linear-gradient(145deg,#111827,#1a1f2e);border-radius:30px;padding:40px;margin-top:20px;border:1px solid rgba(255,255,255,0.05)}
        h1{font-size:32px;margin-bottom:10px}
        .subtitle{color:#64748b;margin-bottom:30px}
        .step{color:#00d4ff;font-size:12px;text-transform:uppercase;letter-spacing:1px;margin:25px 0 15px;font-weight:600}
        .pairs{display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:12px}
        .pair-btn{background:rgba(255,255,255,0.03);border:2px solid rgba(255,255,255,0.1);color:#fff;padding:18px;border-radius:16px;cursor:pointer;font-weight:600;transition:all .3s}
        .pair-btn:hover{border-color:#00d4ff;background:rgba(0,212,255,0.05)}
        .pair-btn.selected{background:linear-gradient(135deg,#00d4ff,#7b2cbf);border-color:transparent;box-shadow:0 10px 30px rgba(0,212,255,0.3)}
        .upload-area{border:2px dashed rgba(0,212,255,0.3);border-radius:20px;padding:50px 30px;text-align:center;cursor:pointer;transition:.3s;background:rgba(0,212,255,0.02)}
        .upload-area:hover{border-color:#00d4ff;background:rgba(0,212,255,0.05)}
        .upload-icon{font-size:48px;margin-bottom:15px}
        #preview{margin-top:20px;border-radius:16px;overflow:hidden;display:none;max-height:400px}
        #preview img{width:100%;height:auto;display:block}
        .analyze-btn{width:100%;padding:22px;background:linear-gradient(135deg,#00d4ff,#7b2cbf);border:none;border-radius:20px;color:#fff;font-size:20px;font-weight:700;cursor:pointer;margin-top:30px;transition:.3s;box-shadow:0 20px 40px rgba(0,212,255,0.2)}
        .analyze-btn:hover{transform:translateY(-3px);box-shadow:0 30px 60px rgba(0,212,255,0.3)}
        .analyze-btn:disabled{opacity:.5;cursor:not-allowed;transform:none}
        
        /* AI Analyzing Animation */
        .analyzing-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(10,14,26,0.98);display:none;flex-direction:column;align-items:center;justify-content:center;z-index:1000}
        .analyzing-overlay.show{display:flex}
        .ai-container{position:relative;width:200px;height:200px}
        .ai-ring{position:absolute;border-radius:50%;border:2px solid transparent}
        .ai-ring:nth-child(1){width:200px;height:200px;border-top-color:#00d4ff;animation:spin 2s linear infinite}
        .ai-ring:nth-child(2){width:160px;height:160px;top:20px;left:20px;border-right-color:#7b2cbf;animation:spin 1.5s linear infinite reverse}
        .ai-ring:nth-child(3){width:120px;height:120px;top:40px;left:40px;border-bottom-color:#00d4ff;animation:spin 1s linear infinite}
        .ai-core{width:60px;height:60px;background:linear-gradient(135deg,#00d4ff,#7b2cbf);border-radius:50%;position:absolute;top:70px;left:70px;animation:pulse 1.5s ease-in-out infinite;box-shadow:0 0 60px rgba(0,212,255,0.5)}
        @keyframes spin{to{transform:rotate(360deg)}}
        @keyframes pulse{0%,100%{transform:scale(1);opacity:1}50%{transform:scale(1.1);opacity:.8}}
        .analyzing-text{margin-top:40px;font-size:24px;font-weight:600;background:linear-gradient(90deg,#00d4ff,#7b2cbf,#00d4ff);background-size:200% auto;-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:shimmer 2s linear infinite}
        @keyframes shimmer{to{background-position:200% center}}
        .analyzing-subtext{margin-top:15px;color:#64748b;font-size:14px}
        .dots::after{content:'';animation:dots 1.5s steps(4,end) infinite}
        @keyframes dots{0%{content:''}25%{content:'.'}50%{content:'..'}75%{content:'...'}100%{content:''}}
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">ðŸš€ WizForex</div>
            <div class="nav">
                <a href="{{ url_for('main.dashboard') }}">Dashboard</a>
                <a href="{{ url_for('main.index') }}">Home</a>
            </div>
        </div>
        
        <div class="main-card">
            <h1>ðŸ¤– AI Trading Bot</h1>
            <p class="subtitle">Upload your chart and get instant AI-powered trading signals</p>
            
            <div class="step">Step 1: Select Currency Pair</div>
            <div class="pairs">
                {% for pair in pairs %}
                <button class="pair-btn" onclick="selectPair('{{ pair }}',this)">{{ pair }}</button>
                {% endfor %}
            </div>
            <input type="hidden" id="pair" name="pair">
            
            <div class="step">Step 2: Upload Chart Image</div>
            <div class="upload-area" onclick="document.getElementById('chartImage').click()">
                <div class="upload-icon">ðŸ“Š</div>
                <div style="font-size:18px;font-weight:600;margin-bottom:8px">Drop your chart here or click to browse</div>
                <div style="color:#64748b;font-size:14px">Supports: PNG, JPG, JPEG, GIF</div>
                <input type="file" id="chartImage" name="chart_image" accept="image/*" style="display:none" onchange="handleFile(this)">
            </div>
            
            <div id="preview">
                <img id="previewImg" src="" alt="Chart Preview">
            </div>
            
            <div class="step">Step 3: Generate Analysis</div>
            <button class="analyze-btn" id="analyzeBtn" onclick="submitAnalysis()">
                âœ¨ Get AI Analysis
            </button>
        </div>
    </div>
    
    <!-- AI Analyzing Overlay -->
    <div class="analyzing-overlay" id="analyzingOverlay">
        <div class="ai-container">
            <div class="ai-ring"></div>
            <div class="ai-ring"></div>
            <div class="ai-ring"></div>
            <div class="ai-core"></div>
        </div>
        <div class="analyzing-text">AI is analyzing<span class="dots"></span></div>
        <div class="analyzing-subtext">Scanning market patterns â€¢ Calculating indicators â€¢ Generating signals</div>
    </div>
    
    <script>
        let selectedPair=null;
        function selectPair(p,btn){
            selectedPair=p;
            document.getElementById('pair').value=p;
            document.querySelectorAll('.pair-btn').forEach(b=>b.classList.remove('selected'));
            btn.classList.add('selected');
        }
        function handleFile(input){
            if(input.files&&input.files[0]){
                const reader=new FileReader();
                reader.onload=function(e){
                    document.getElementById('previewImg').src=e.target.result;
                    document.getElementById('preview').style.display='block';
                }
                reader.readAsDataURL(input.files[0]);
            }
        }
        function submitAnalysis(){
            if(!selectedPair){alert('Please select a currency pair!');return}
            document.getElementById('analyzingOverlay').classList.add('show');
            document.getElementById('analyzeBtn').disabled=true;
            
            const form=document.createElement('form');
            form.method='POST';
            form.action='/analyze';
            form.enctype='multipart/form-data';
            
            const pairInput=document.createElement('input');
            pairInput.type='hidden';
            pairInput.name='pair';
            pairInput.value=selectedPair;
            form.appendChild(pairInput);
            
            const fileInput=document.getElementById('chartImage');
            if(fileInput.files[0]){
                const newFile=fileInput.cloneNode(true);
                newFile.name='chart_image';
                form.appendChild(newFile);
            }
            
            document.body.appendChild(form);
            setTimeout(()=>form.submit(),500);
        }
    </script>
</body>
</html>