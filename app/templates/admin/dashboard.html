{% extends "base.html" %}

{% block title %}Admin Dashboard - WizForex{% endblock %}

{% block content %}
<style>
    .admin-container { max-width: 1400px; margin: 0 auto; padding: 20px; }
    .admin-header { 
        display: flex; 
        justify-content: space-between; 
        align-items: center; 
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 1px solid var(--border);
    }
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }
    .stat-card {
        background: var(--bg-card);
        padding: 25px;
        border-radius: 16px;
        border: 1px solid var(--border);
    }
    .stat-value {
        font-size: 2.5rem;
        font-weight: 800;
        color: var(--primary);
        margin: 10px 0;
    }
    .stat-label { color: var(--text-secondary); font-size: 0.9rem; }
    .admin-nav {
        display: flex;
        gap: 15px;
        margin-bottom: 30px;
        flex-wrap: wrap;
    }
    .admin-nav a {
        padding: 12px 24px;
        background: var(--bg-card);
        border-radius: 12px;
        color: var(--text-primary);
        text-decoration: none;
        border: 1px solid var(--border);
        transition: all 0.3s;
    }
    .admin-nav a:hover, .admin-nav a.active {
        background: var(--primary);
        border-color: var(--primary);
    }
    .recent-section {
        background: var(--bg-card);
        border-radius: 16px;
        padding: 25px;
        margin-bottom: 20px;
        border: 1px solid var(--border);
    }
    .section-title {
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    .activity-list { display: flex; flex-direction: column; gap: 12px; }
    .activity-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px;
        background: var(--bg-dark);
        border-radius: 10px;
    }
    .activity-info { display: flex; flex-direction: column; }
    .activity-title { font-weight: 500; }
    .activity-meta { color: var(--text-secondary); font-size: 0.85rem; }
    .badge {
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.75rem;
        font-weight: 600;
    }
    .badge-success { background: rgba(0, 208, 132, 0.2); color: var(--success); }
    .badge-primary { background: rgba(233, 69, 96, 0.2); color: var(--primary); }
    .badge-warning { background: rgba(255, 165, 2, 0.2); color: var(--warning); }
</style>

<div class="admin-container">
    <div class="admin-header">
        <div>
            <h1>üëë Admin Dashboard</h1>
            <p style="color: var(--text-secondary);">Manage your forex bot platform</p>
        </div>
        <a href="{{ url_for('main.dashboard') }}" class="btn btn-secondary">‚Üê Back to App</a>
    </div>
    
    <div class="admin-nav">
        <a href="{{ url_for('admin.dashboard') }}" class="active">Dashboard</a>
        <a href="{{ url_for('admin.users') }}">Users</a>
        <a href="{{ url_for('admin.analyses') }}">Analyses</a>
        <a href="{{ url_for('admin.transactions') }}">Transactions</a>
        <a href="{{ url_for('admin.settings') }}">Settings</a>
    </div>
    
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-label">Total Users</div>
            <div class="stat-value">{{ stats.total_users }}</div>
            <div style="color: var(--success); font-size: 0.9rem;">+{{ stats.new_users_today }} today</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-label">Total Analyses</div>
            <div class="stat-value">{{ stats.total_analyses }}</div>
            <div style="color: var(--success); font-size: 0.9rem;">+{{ stats.analyses_today }} today</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-label">Credits Spent</div>
            <div class="stat-value">{{ stats.credits_spent }}</div>
            <div class="stat-label">On analyses</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-label">Ads Watched</div>
            <div class="stat-value">{{ stats.total_ads_watched }}</div>
            <div class="stat-label">Total views</div>
        </div>
    </div>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 20px;">
        <div class="recent-section">
            <div class="section-title">üë• Recent Users</div>
            <div class="activity-list">
                {% for user in stats.recent_users %}
                <div class="activity-item">
                    <div class="activity-info">
                        <span class="activity-title">{{ user.username }}</span>
                        <span class="activity-meta">{{ user.email }} ‚Ä¢ {{ user.created_at.strftime('%Y-%m-%d') }}</span>
                    </div>
                    <span class="badge badge-primary">{{ user.credits }} üíé</span>
                </div>
                {% endfor %}
            </div>
        </div>
        
        <div class="recent-section">
            <div class="section-title">üìä Recent Analyses</div>
            <div class="activity-list">
                {% for analysis in stats.recent_analyses %}
                <div class="activity-item">
                    <div class="activity-info">
                        <span class="activity-title">{{ analysis.pair }}</span>
                        <span class="activity-meta">{{ analysis.signal }} ‚Ä¢ {{ analysis.created_at.strftime('%H:%M') }}</span>
                    </div>
                    <span class="badge {% if analysis.signal == 'BUY' %}badge-success{% elif analysis.signal == 'SELL' %}badge-danger{% else %}badge-warning{% endif %}">
                        {{ analysis.signal }}
                    </span>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
